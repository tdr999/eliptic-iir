        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x0c)
            gatt?.writeCharacteristic(charac_3)
        }, 2000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x11)
            gatt?.writeCharacteristic(charac_3)
        }, 2125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x13)
            gatt?.writeCharacteristic(charac_3)
        }, 2250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x17, 0x00, 0x65, 0x6e, 0x5f, 0x55, 0x53)
            gatt?.writeCharacteristic(charac_3)
        }, 2375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x11)
            gatt?.writeCharacteristic(charac_3)
        }, 2500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_6?.value = byteArrayOf(
                0x0f,
                0x47,
                0x00,
                178.toByte(),
                0x07,
                0x01,
                0x01,
                0x00,
                0x00,
                0x00,
                0x00,
                178.toByte(),
                0x07,
                0x01,
                0x01,
                0x00,
                0x2c,
                0x1d,
                128.toByte(),
                0x5c
            )
            gatt?.writeCharacteristic(charac_6)
        }, 2625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_7?.value = byteArrayOf(0x00, 0x00, 0x00, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_7)
        }, 2750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_6?.value = byteArrayOf(0x01, 0x46, 0x00)
            gatt?.writeCharacteristic(charac_6)
        }, 2875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_6?.value = byteArrayOf(
                0x0f,
                0x46,
                0x00,
                178.toByte(),
                0x07,
                0x01,
                0x01,
                0x00,
                0x00,
                0x00,
                0x00,
                178.toByte(),
                0x07,
                0x01,
                0x01,
                0x00,
                0x2c,
                0x1d,
                128.toByte(),
                0x5c
            )
            gatt?.writeCharacteristic(charac_6)
        }, 3000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_7?.value = byteArrayOf(0x00, 0x00, 0x00, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_7)
        }, 3125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x19, 0x00, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 3250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(
                0x01,
                0x01,
                230.toByte(),
                0x07,
                0x05,
                0x0b,
                0x16,
                0x22,
                0x07,
                0x08
            )
            gatt?.writeCharacteristic(charac_4)
        }, 3375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(0x03)
            gatt?.writeCharacteristic(charac_4)
        }, 3500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_8?.value = byteArrayOf(
                0x4f,
                0x00,
                0x00,
                206.toByte(),
                0x07,
                0x07,
                0x01,
                0x01,
                170.toByte(),
                0x00,
                224.toByte(),
                0x2e,
                0x15,
                0x77,
                206.toByte(),
                164.toByte()
            )
            gatt?.writeCharacteristic(charac_8)
        }, 3625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(
                0x01,
                0x02,
                230.toByte(),
                0x07,
                0x05,
                0x0b,
                0x16,
                0x22,
                0x07,
                0x08
            )
            gatt?.writeCharacteristic(charac_4)
        }, 3750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x03, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 3875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(0x03)
            gatt?.writeCharacteristic(charac_4)
        }, 4000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00, 193.toByte(), 0x00, 0x08, 0x4f, 0x74, 0x6f, 0x70, 0x65, 0x6e, 0x69, 0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 4125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x02, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 4250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                193.toByte(),
                0x00,
                0x04,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                255.toByte(),
                255.toByte(),
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 4375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(
                0x01,
                0x02,
                230.toByte(),
                0x07,
                0x05,
                0x0b,
                0x16,
                0x22,
                0x07,
                0x08
            )
            gatt?.writeCharacteristic(charac_4)
        }, 4500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x01,
                0x00,
                0x01,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                0x05,
                0x00,
                0x01,
                0x19,
                0x0b,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 4625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x41,
                0x01,
                0x00,
                0x00,
                0x1c,
                0x0d,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00,
                0x00,
                0x03,
                0x1e,
                0x0e,
                0x43,
                0x6c,
                0x65
            )
            gatt?.writeCharacteristic(charac_20)
        }, 4750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x0a, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 4875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(0x03)
            gatt?.writeCharacteristic(charac_4)
        }, 5000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x41,
                0x02,
                0x61,
                0x72,
                0x00,
                0x03,
                0x01,
                0x1a,
                0x0f,
                0x53,
                0x68,
                0x6f,
                0x77,
                0x65,
                0x72,
                0x00,
                0x04,
                0x00,
                0x18
            )
            gatt?.writeCharacteristic(charac_20)
        }, 5125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                129.toByte(),
                0x03,
                0x0e,
                0x54,
                0x68,
                0x75,
                0x6e,
                0x64,
                0x65,
                0x72,
                0x73,
                0x74,
                0x6f,
                0x72,
                0x6d,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 5250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                193.toByte(),
                0x00,
                0x02,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                0x00,
                0x18,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 5375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00, 193.toByte(), 0x00, 128.toByte(), 0x07, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x03
            )
            gatt?.writeCharacteristic(charac_20)
        }, 5500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x10, 0x00, 0x01, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 5625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(
                0x01,
                0x05,
                230.toByte(),
                0x07,
                0x05,
                0x0b,
                0x16,
                0x21,
                0x1d,
                0x0c
            )
            gatt?.writeCharacteristic(charac_4)
        }, 5750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_4?.value = byteArrayOf(0x03)
            gatt?.writeCharacteristic(charac_4)
        }, 5875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x10, 0x00, 0x00, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 6000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(
                0x06, 0x1e, 0x00, 0x4d, 0x4d, 0x2f, 0x64, 0x64, 0x2f, 0x79, 0x79, 0x79, 0x79, 0x00
            )
            gatt?.writeCharacteristic(charac_3)
        }, 6125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00, 193.toByte(), 0x00, 0x08, 0x4f, 0x74, 0x6f, 0x70, 0x65, 0x6e, 0x69, 0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                193.toByte(),
                0x00,
                0x04,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                255.toByte(),
                255.toByte(),
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x01,
                0x00,
                0x01,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                0x05,
                0x00,
                0x01,
                0x19,
                0x0b,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x41,
                0x01,
                0x00,
                0x00,
                0x1c,
                0x0d,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00,
                0x00,
                0x03,
                0x1e,
                0x0e,
                0x43,
                0x6c,
                0x65
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                0x41,
                0x02,
                0x61,
                0x72,
                0x00,
                0x03,
                0x01,
                0x1a,
                0x0f,
                0x53,
                0x68,
                0x6f,
                0x77,
                0x65,
                0x72,
                0x00,
                0x04,
                0x00,
                0x18
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                129.toByte(),
                0x03,
                0x0e,
                0x54,
                0x68,
                0x75,
                0x6e,
                0x64,
                0x65,
                0x72,
                0x73,
                0x74,
                0x6f,
                0x72,
                0x6d,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 6875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00,
                193.toByte(),
                0x00,
                0x02,
                177.toByte(),
                0x0f,
                0x7c,
                0x62,
                0x0c,
                0x00,
                0x18,
                0x43,
                0x6c,
                0x65,
                0x61,
                0x72,
                0x00
            )
            gatt?.writeCharacteristic(charac_20)
        }, 7000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_20?.value = byteArrayOf(
                0x00, 193.toByte(), 0x00, 128.toByte(), 0x07, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x03
            )
            gatt?.writeCharacteristic(charac_20)
        }, 7125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x50)
            gatt?.writeCharacteristic(charac_3)
        }, 7250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x06, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 7375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x00, 0x07, 0x00, 0x1f)
            gatt?.writeCharacteristic(charac_3)
        }, 7500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x01, 0x07, 0x00, 0x7f)
            gatt?.writeCharacteristic(charac_3)
        }, 7625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x02, 0x07, 0x00, 128.toByte())
            gatt?.writeCharacteristic(charac_3)
        }, 7750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x03, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 7875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x04, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x05, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x06, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x07, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x08, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x02, 0x09, 0x12, 0x2c, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x01, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 8750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_8?.value = byteArrayOf(
                0x4f,
                0x00,
                0x00,
                206.toByte(),
                0x07,
                0x07,
                0x01,
                0x01,
                170.toByte(),
                0x00,
                224.toByte(),
                0x2e,
                0x15,
                0x77,
                206.toByte(),
                164.toByte()
            )
            gatt?.writeCharacteristic(charac_8)
        }, 8875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(
                0x08,
                0x00,
                0x3c,
                0x00,
                0x08,
                0x00,
                0x15,
                0x00,
                0x00,
                0x00,
                0x00,
                0x00
            )
            gatt?.writeCharacteristic(charac_3)
        }, 9000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x09, 130.toByte())
            gatt?.writeCharacteristic(charac_3)
        }, 9125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x03, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 9250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x02, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 9375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x0a, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 9500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x10, 0x00, 0x01, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 9625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x10, 0x00, 0x00, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 9750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 9875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x07, 0x00, 155.toByte(), 0x2c, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 10000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x0d, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 10125)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(
                0x0a, 255.toByte(), 0x30, 0x00, 0x05, 0x03, 0x04, 0x07, 0x01, 0x02, 0x06
            )
            gatt?.writeCharacteristic(charac_3)
        }, 10250)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x16, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 10375)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(
                0x06, 0x1e, 0x00, 0x4d, 0x4d, 0x2f, 0x64, 0x64, 0x2f, 0x79, 0x79, 0x79, 0x79, 0x00
            )
            gatt?.writeCharacteristic(charac_3)
        }, 10500)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x1d, 0x00, 0x01)
            gatt?.writeCharacteristic(charac_3)
        }, 10625)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x1a, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 10750)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x1f, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 10875)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_3?.value = byteArrayOf(0x06, 0x20, 0x00, 0x00)
            gatt?.writeCharacteristic(charac_3)
        }, 11000)

        Handler(Looper.getMainLooper()).postDelayed({
            charac_7?.value = byteArrayOf(
                0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            )
            gatt?.writeCharacteristic(charac_7)
            ESTE_AUTHENTICAT = 1
        }, 11125)
        Handler(Looper.getMainLooper()).postDelayed({

            setDateTime()
        }, 11250)

/*-----------------------*/
        thread(start = true, name = "confirm", block = {
            val urlString = "https://dev-perheart.eu/health/update_mi_band_connected_status/" + current_user.device_mac
            Log.i("url", "${urlString}")
            val url = URL(urlString)

            val conn = url.openConnection() as HttpURLConnection
            conn.doOutput = true
            conn.requestMethod = "POST"

            conn.setRequestProperty("Content-Type", "application/json; utf-8")
            conn.setRequestProperty(
                "X-Api-Key", "d20b21f0-5f63-11ec-96b3-0242ac1c0002"
            )

            var responseCode = conn.responseCode
            Log.i("Response prevConn", responseCode.toString())
            conn.disconnect()

        }).run()
